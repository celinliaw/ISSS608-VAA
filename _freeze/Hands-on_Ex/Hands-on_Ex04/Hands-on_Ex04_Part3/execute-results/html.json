{
  "hash": "25fe3d64d7d309188d30ea0e09384f78",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Hands on Exercise 4 Part 3\"\nauthor: \"Liaw Ying Ting, Celin\"\ndate: 7 May 2025\ndate-modified: \"last-modified\"\nexecute: \n  eval: true\n  echo: true\n  warning: false\n  freeze: true\n---\n\n\n\n# 7.1 Learning Outcome\n\nIn this chapter, statistical graphics for visualising uncertainty will be created. Items learnt in this chapter includes:\n\n-   To plot statistics error bars by using ggplot2\n\n-   To plot interactive error bars by combining ggplot2, plotly and DT\n\n-   To create advanced by using ggdist\n\n-   To create hypothetical outcome plots (HOPs) by using ungeviz package\n\n# 7.2 Getting Started\n\n## 7.2.1 Installing and loading the packages\n\nFor the purpose of this exercise, the following R packages will be used:\n\n-   tidyverse\n\n-   plotly\n\n-   gganimate\n\n-   DT\n\n-   crosstalk\n\n-   ggdist\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npacman::p_load(plotly, crosstalk, DT, \n               ggdist, ggridges, colorspace,\n               gganimate, tidyverse)\n```\n:::\n\n\n\n## 7.2.2 Data Import\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nexam <- read_csv(\"Exam_data.csv\")\n```\n:::\n\n\n\n# 7.3 Visualizing the uncertainty of point estimates: ggplot2 methods\n\nIn this section, error bars of math scored by race will be plotted in *exam* tibble data frame.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmy_sum <- exam %>%\n  group_by(RACE) %>%\n  summarise(\n    n=n(),\n    mean=mean(MATHS),\n    sd=sd(MATHS)\n    ) %>%\n  mutate(se=sd/sqrt(n-1))\n```\n:::\n\n\n\n-   group_by() of dplyr package is used to group the observation by RACE\n\n-   summarise() is used to compute the count of observations, mean and standard deviation\n\n-   mutate() is used to derive standard error of Maths by RACE, and the output is saved as a tibble data table called my_sum\n\nThe code chunk below will be used to display *my_sum* tibble data frame in a html table format\n\n::: panel-tabset\n### The Table\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> RACE </th>\n   <th style=\"text-align:right;\"> n </th>\n   <th style=\"text-align:right;\"> mean </th>\n   <th style=\"text-align:right;\"> sd </th>\n   <th style=\"text-align:right;\"> se </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> Chinese </td>\n   <td style=\"text-align:right;\"> 193 </td>\n   <td style=\"text-align:right;\"> 76.50777 </td>\n   <td style=\"text-align:right;\"> 15.69040 </td>\n   <td style=\"text-align:right;\"> 1.132357 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Indian </td>\n   <td style=\"text-align:right;\"> 12 </td>\n   <td style=\"text-align:right;\"> 60.66667 </td>\n   <td style=\"text-align:right;\"> 23.35237 </td>\n   <td style=\"text-align:right;\"> 7.041005 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Malay </td>\n   <td style=\"text-align:right;\"> 108 </td>\n   <td style=\"text-align:right;\"> 57.44444 </td>\n   <td style=\"text-align:right;\"> 21.13478 </td>\n   <td style=\"text-align:right;\"> 2.043177 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Others </td>\n   <td style=\"text-align:right;\"> 9 </td>\n   <td style=\"text-align:right;\"> 69.66667 </td>\n   <td style=\"text-align:right;\"> 10.72381 </td>\n   <td style=\"text-align:right;\"> 3.791438 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n### The Code\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nknitr::kable(head(my_sum), format = 'html')\n```\n:::\n\n\n:::\n\n## 7.3.1 Plotting standard error bars of point estimates\n\nThe plot will be the standard error bars of mean math score by race.\n\n::: panel-tabset\n### The Plot\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](Hands-on_Ex04_Part3_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\n\n### The Code\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(my_sum) +\n  geom_errorbar(\n    aes(x=RACE, \n        ymin=mean-se, \n        ymax=mean+se), \n    width=0.2, \n    colour=\"black\", \n    alpha=0.9, \n    linewidth=0.5) +\n  geom_point(aes\n           (x=RACE, \n            y=mean), \n           stat=\"identity\", \n           color=\"red\",\n           size = 1.5,\n           alpha=1) +\n  ggtitle(\"Standard error of mean maths score by race\")\n```\n\n::: {.cell-output-display}\n![](Hands-on_Ex04_Part3_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n\n:::\n\n::: {.callout-tip title=\"Things to learn from the code chunk above\"}\n-   The error bars are computed by using the formula `mean +/- se`.\n-   For `geom_point()`, it is important to indicate `stat = \"identity\"`.\n:::\n\n## 7.3.2 Plotting Confidence Interval of Point Estimates\n\nWe can also plot the confidence intervals of mean math scores by race.\n\n::: panel-tabset\n### The Plot\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](Hands-on_Ex04_Part3_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\n\n\n### The Code\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(my_sum) +\n  geom_errorbar(\n    aes(x=reorder(RACE, -mean), \n        ymin=mean-1.96*se, \n        ymax=mean+1.96*se), \n    width=0.2, \n    colour=\"black\", \n    alpha=0.9, \n    linewidth=0.5) +\n  geom_point(aes\n           (x=RACE, \n            y=mean), \n           stat=\"identity\", \n           color=\"red\",\n           size = 1.5,\n           alpha=1) +\n  labs(x = \"Maths score\",\n       title = \"95% confidence interval of mean maths score by race\")\n```\n:::\n\n\n:::\n\n::: {.callout-tip title=\"Things to learn from the code chunk above\"}\n- The confidence intervals are computed by using the formula mean+/-1.96*se\n- The error bars are sorted by using the average math scores\n- <code style=\"color: purple;\">labs()</code> argument of ggplot2 is used to change the x-axis label",
    "supporting": [
      "Hands-on_Ex04_Part3_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}